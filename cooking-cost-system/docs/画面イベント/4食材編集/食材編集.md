# 食材編集 画面イベント設計

## 1. 概要
登録済みの食材情報を検索・抽出し、内容（価格、量、購入先など）を更新するための画面である。
「食材追加」画面と同様の2カラム構成を採用し、直感的な操作と音声入力をサポートする。

## 2. 画面要素
### 左カラム：編集フォーム
| 要素名 | 種類 | 説明 | 備考 |
| :--- | :--- | :--- | :--- |
| **商品名 (検索)** | 予測検索入力 | 入力内容に応じて、データベースから既存食材を候補（商品名・購入先・価格）として表示。選択すると各項目に値が自動展開される。 | 必須 |
| **価格 (変更前)** | 読取専用 | 選択した食材の現在の価格を表示。 | 編集不可 |
| **価格 (変更後)** | 数値入力 | 新しい価格を入力。デフォルトは現在の価格がセットされる。 | 必須、最小値: 0 |
| **量** | 数値入力 | 新しい量を数値で入力。 | 必須、最小値: 0、小数可 |
| **単位** | セレクト入力 | 「g」「ml」「個」から選択。 | 必須 |
| **購入先** | テキスト入力 | 仕入れ先を編集。 | 必須 |

### 右カラム：アクション
| 要素名 | 種類 | 説明 | 備考 |
| :--- | :--- | :--- | :--- |
| **音声で入力** | ボタン | 音声認識を開始し、価格（変更後）や量などを自動更新する。 | |
| **食材を登録** | ボタン | 入力内容を確定し、更新確認モーダルを表示する。 | 緑色（#53B69B） |

### 更新確認モーダル
- **価格の比較表示**: 「変更前（取消線付き）」と「変更後（強調表示）」を並べて表示し、変化を分かりやすくする。
- **操作**: Enterキーで「更新確定」、ESCキーで「戻る」。

## 3. 画面イベント
### 3.1 予測検索
- 商品名入力フィールドに1文字以上入力されると、バックエンドAPI（GET /api/ingredients?name=...）を呼び出し、最大5件の候補を表示。
- 候補リストから食材を選択すると、内部ID、現在の価格、量、単位、購入先がフォームに自動セットされる。

### 3.2 音声入力
- 「価格」「量」「購入先」を音声で上書き可能。
- 既存の食材が選択されている状態で、部分的な変更（例：「価格を600円に変更」など）に使用する。

### 3.3 更新実行
- 「食材を登録」ボタン押下時、バリデーション（特に食材が選択されているか）を実施。
- 確認モーダルで承認後、バックエンドAPI（PUT /api/ingredients/:id）へデータを送信。
- 成功時、トースト通知を表示しフォームをリセットする。
