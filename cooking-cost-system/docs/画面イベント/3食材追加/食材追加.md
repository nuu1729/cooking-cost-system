# 食材追加 画面イベント設計

## 1. 概要
本画面は、新しく購入した食材や調味料をシステムに登録するための画面である。
直感的なテキスト入力に加え、ハンズフリーで操作可能な「音声入力機能」を搭載し、仕入れ作業の効率化を図る。

## 2. 画面要素
### 左カラム：入力フォーム
| 要素名 | 種類 | 説明 | 備考 |
| :--- | :--- | :--- | :--- |
| **商品名** | テキスト入力 | 食材の名称を入力（例：トマト）。 | 必須 |
| **価格** | 数値入力 | 購入金額を入力（¥プレフィックス表示）。 | 必須、最小値: 0 |
| **量** | 数値入力 | 購入した「量」を数値で入力。 | 必須、最小値: 0、小数可 |
| **単位** | セレクト入力 | 「g」「ml」「個」から選択。 | 必須 |
| **購入先** | テキスト入力 | 仕入れ先やスーパー名を入力（例：コスモス）。 | 必須 |

### 右カラム：アクション
| 要素名 | 種類 | 説明 | 備考 |
| :--- | :--- | :--- | :--- |
| **音声で入力** | ボタン | 音声認識（Web Speech API）を開始する。 | 実行中：赤色に変化＋波動アニメーション |
| **食材を登録** | ボタン | 入力内容の確認モーダルを表示。 | 緑色（#53B69B） |

## 3. 画面イベント
### 3.1 ページロード
- ユーザー認証確認。
- フォームとアクションボタンを2カラムで表示。

### 3.2 音声入力イベント
#### 3.2.1 認識開始
- 「音声で入力」ボタンをクリックすると、ブラウザのマイク使用許可を求め、認識を開始。
- ボタンが赤色に変化し、**「聴いています...」** というステータス表示と波動（Ping）アニメーションが起動。

#### 3.2.2 音声解析 (Parsing Logic)
- 認識した日本語テキストから以下のパターンを抽出・自動入力：
    - **価格**: 「数字 + 円」
    - **量・単位**: 「数字 + グラム/g/ml/ミリリットル/個」
    - **商品名・購入先**: 助詞や句読点で区切られた名詞（例：「トマト、コスモス」の先頭が商品名、末尾が購入先）。
- 解析結果は即座にフォームの各フィールドへ反映される。
- 解析された生の文章を確認用プレビューとして表示。

### 3.3 確認・登録
- 音声入力後はユーザーが内容を確認・修正可能。
- 「食材を登録」をクリックして確認モーダルへ。
- モーダル上で **Enterキー** で登録確定。
